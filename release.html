<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src/site/markdown/release.md at 2018-12-24
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20181224" />
    <meta http-equiv="Content-Language" content="en" />
    <title>junixsocket &#x2013; How to release junixsocket</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/kohlschutter/junixsocket">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>junixsocket — Unix Domain Sockets for Java</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2018-12-24<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.1.0</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Parent Project</li>
    <li><a href="../kohlschutter-parent/index.html" title="kohlschutter-parent"><span class="none"></span>kohlschutter-parent</a></li>
      <li class="nav-header">Modules</li>
    <li><a href="junixsocket-common/index.html" title="junixsocket-common"><span class="none"></span>junixsocket-common</a></li>
    <li><a href="junixsocket-rmi/index.html" title="junixsocket-rmi"><span class="none"></span>junixsocket-rmi</a></li>
    <li><a href="junixsocket-mysql/index.html" title="junixsocket-mysql"><span class="none"></span>junixsocket-mysql</a></li>
    <li><a href="junixsocket-demo/index.html" title="junixsocket-demo"><span class="none"></span>junixsocket-demo</a></li>
    <li><a href="junixsocket-native/index.html" title="junixsocket-native"><span class="none"></span>junixsocket-native</a></li>
    <li><a href="junixsocket-native-custom/index.html" title="junixsocket-native-common"><span class="none"></span>junixsocket-native-common</a></li>
    <li><a href="junixsocket-native-common/index.html" title="junixsocket-native-common"><span class="none"></span>junixsocket-native-common</a></li>
      <li class="nav-header">Overview</li>
    <li><a href="index.html" title="Welcome"><span class="none"></span>Welcome</a></li>
    <li><a href="changelog.html" title="New & Noteworthy"><span class="none"></span>New & Noteworthy</a></li>
    <li><a href="quickstart.html" title="Quick Start"><span class="none"></span>Quick Start</a></li>
    <li><a href="faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
      <li class="nav-header">Demo Code</li>
    <li><a href="junixsocket-demo/xref/index.html" title="Source reference"><span class="none"></span>Source reference</a></li>
      <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>How to release junixsocket</h1>
<p>NOTE: This is probably not interesting unless you&#x2019;re the project admin or going to fork it.</p>
<div class="section">
<h2><a name="Prerequisites"></a>Prerequisites</h2>
<div class="section">
<div class="section">
<div class="section">
<h5><a name="github.com_credentials"></a>github.com credentials</h5>
<ol style="list-style-type: decimal">

<li>On github.com, create an OAuth token with write permissions to the repo.</li>
<li>Add the credentials to your keychain</li>
</ol></div>
<div class="section">
<h5><a name="GPG_keys"></a>GPG keys</h5>
<p>Instructions for macOS</p>
<ul>

<li>

<p>Install gpg and helper tools</p>
<p>brew install gpg gpg2 gpg-agent pinentry-mac`</p>
</li>
<li>

<p>Enable pinentry-mac (allows us to store the GPG keys in the macOS keychain)</p>
<h1>open or create ~/.gnupg/gpg-agent.conf</h1>
<h1>then add the following line if it doesn&#x2019;t exist yet:</h1>
<p>pinentry-program /usr/local/bin/pinentry-mac</p>
</li>
<li>

<p>Generate GPG key</p>
<p>gpg2 &#x2013;generate-key</p>
<h1>Follow on-screen instructions. Use a long, memorable passphrase. Remember GPG key ID</h1>
<h1>Publish the GPG public key on the GPG keyservers</h1>
<p>gpg2 &#x2013;send-keys THEKEYID</p>
</li>
</ul></div></div></div></div>
<div class="section">
<h2><a name="Common_tasks"></a>Common tasks</h2>
<div class="section">
<div class="section">
<h4><a name="Ensure_code_is_properly_formatted_and_licenses_are_in_place"></a>Ensure code is properly formatted and licenses are in place</h4>

<div>
<div>
<pre class="source">cd junixsocket
# review LICENSE file and verify that it's up-to-date
mvn java-formatter:format
mvn license:format
# git add / commit here...
</pre></div></div>
</div>
<div class="section">
<h4><a name="Bump_project_version"></a>Bump project version</h4>

<div>
<div>
<pre class="source">cd junixsocket
mvn versions:set -DnewVersion=2.1.0
# git add / commit here...
mvn scm:tag
</pre></div></div>
</div>
<div class="section">
<h4><a name="Deploy_code"></a>Deploy code</h4>
<div class="section">
<h5><a name="a1._Deploy_to_staging"></a>1. Deploy to staging</h5>

<div>
<div>
<pre class="source">cd junixsocket
mvn clean install -Pstrict
mvn deploy -Psigned
</pre></div></div>

<p>NOTE: <tt>-Pstrict</tt> enforces <i>spotbugs</i> and <i>checkstyle</i> checks to succeed.</p></div>
<div class="section">
<h5><a name="In_case_of_failures_while_staging:"></a>In case of failures while staging:</h5>
<p>If the deployment fails with <tt>Remote staging failed: Staging rules failure!</tt> and due to <tt>No public key: Key with id: (...) was not able to be located on ...</tt>, then that means that the GPG key you created above has not been fully distributed among the GPG key servers. Try to manually push to the ones mentioned in the error message, and try again.</p>
<p>For example:</p>

<div>
<div>
<pre class="source">`gpg2 --keyserver http://keyserver.ubuntu.com:11371 --send-keys THEKEYID`
</pre></div></div>
</div>
<div class="section">
<h5><a name="a2._Review_the_deployed_artifacts"></a>2. Review the deployed artifacts</h5>

<div>
<div>
<pre class="source">The URL of the staging repository is `https://oss.sonatype.org/content/groups/staging`.
The artifacts can be found [here](https://oss.sonatype.org/content/groups/staging/com/kohlschutter/junixsocket/).
</pre></div></div>
</div>
<div class="section">
<h5><a name="a3._Release_artifact_to_Maven_Central"></a>3. Release artifact to Maven Central</h5>

<div>
<div>
<pre class="source">mvn nexus-staging:release     
</pre></div></div>
</div></div>
<div class="section">
<h4><a name="Deploy_website"></a>Deploy website</h4>
<p>This builds the Maven site and publishes it to <a class="externalLink" href="https://kohlschutter.github.io/junixsocket/">https://kohlschutter.github.io/junixsocket/</a>.</p>

<div>
<div>
<pre class="source">cd junixsocket 
mvn clean install
mvn site site:stage scm-publish:publish-scm
</pre></div></div>

<p>NOTE: There can be a 10-minute delay until the pages get updated automatically in your browser. Hit refresh to expedite.</p></div>
<div class="section">
<h4><a name="Prepare_next_version"></a>Prepare next version</h4>

<div>
<div>
<pre class="source">mvn versions:set -DnewVersion=2.1.1-SNAPSHOT
# git add / commit here...
</pre></div></div></div></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2009&#x2013;2018
<a href="https://www.kohlschutter.com/">Kohlschütter Search Intelligence</a>.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>